<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Svarni | Culture Worn With Pride</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&family=Playfair+Display:wght@400;700&family=Poppins:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
</head>

<body>

    <nav class="navbar">
        <div class="logo-container">
            <img src="images/logo.png" alt="Svarni Logo" class="logo-img">
        </div>
        <ul class="nav-links">
            <li><a href="#">Home</a></li>
            <li><a href="#collection">Collection</a></li>
            <li><a href="#story">Our Story</a></li>
        </ul>
        <div class="icons">
            <i class="fas fa-search"></i>
            <i class="fas fa-shopping-bag"></i>
        </div>
    </nav>

    <header class="hero">
        <div class="hero-overlay"></div>
        <div class="hero-text">
            <span class="subtitle">Maharashtrian Heritage</span>
            <h1>Culture Worn <br> With Pride.</h1>
            <p class="tagline">A tribute to golden roots and timeless grace.</p>
            <a href="#collection" class="btn">Shop The Collection</a>
        </div>
    </header>

    <section id="story" class="brand-story">
        <h2 class="section-heading">The Svarni Story</h2>
        <p style="font-weight: 500; color: #4a3728; margin-bottom: 20px; font-family: 'Poppins', sans-serif;">
            "स्वर्णी ही केवळ दागिन्यांची ओळख नाही, तर आपल्या परंपरेचा सन्मान आहे.
            बहिणींच्या प्रेमातून आणि महाराष्ट्रीयन संस्कृतीच्या प्रेरणेतून जन्मलेली स्वर्णी,
            आपली मुळे जपत आधुनिक सौंदर्य मांडते. प्रत्येक दागिना आपल्या परंपरेची
            कथा सांगतो अभिमानाने, सौंदर्याने आणि आत्म्याने."
        </p>
        <div style="font-size: 1.5rem; color: #bcaaa4; margin: 15px 0;">❖</div>
        <p>
            "Svarni is a tribute to golden roots and timeless grace. Born from the love of sisters
            and inspired by Maharashtrian heritage, our jewellery reflects tradition, culture,
            and quiet luxury. Each piece is thoughtfully crafted to preserve the beauty of our
            roots while blending effortlessly into the modern woman's world. Svarni is not just
            jewellery — it is culture worn with pride."
        </p>
    </section>

    <section id="collection" class="products">
        <h2 class="section-title">New Arrivals <div class="line"></div></h2>

        <div class="category-container">
            <button class="cat-btn active" onclick="filterSelection('all')">All</button>
            <button class="cat-btn" onclick="filterSelection('invisible')">Invisible Necklace</button>
            <button class="cat-btn" onclick="filterSelection('mangalsutra')">Mangalsutra</button>
            <button class="cat-btn" onclick="filterSelection('earcuffs')">Earcuffs</button>
            <button class="cat-btn" onclick="filterSelection('nath')">Nath</button>
            <button class="cat-btn" onclick="filterSelection('bugdi')">Bugdi</button>
        </div>

        <div class="product-grid" id="productGrid">
            <p style="text-align: center; width: 100%; color: #888;">Loading beautiful jewelry...</p>
        </div>
    </section>

    <div id="productModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal()">&times;</span>
            <div class="modal-image-container">
                <img id="modalImg" src="" alt="Product Detail">
            </div>
            <div class="modal-details">
                <h2 id="modalTitle" class="modal-title">Product Name</h2>
                <p id="modalPrice" class="modal-price">₹0</p>
                <p id="modalDesc" class="modal-desc">Product description goes here.</p>
                <button id="modalBuyBtn" class="btn-buy" style="width: 100%; padding: 15px;">
                    Buy On WhatsApp
                </button>
            </div>
        </div>
    </div>

    <footer>
        <p>&copy; 2026 Svarni. Made with <i class="fas fa-heart" style="color: #bcaaa4;"></i> in India.</p>
    </footer>

    <script>
        // WhatsApp Function
        function buy(productName, price) {
            let phoneNumber = "919322148369";
            let message = `Hello Svarni! ✨\n\nI saw this on your website and would like to order:\n*${productName}*\nPrice: ₹${price}\n\nIs this available?`;
            let url = `https://wa.me/${phoneNumber}?text=${encodeURIComponent(message)}`;
            window.open(url, '_blank');
        }

        // --- NEW: FETCH PRODUCTS FROM DATABASE ---
        async function loadDatabase() {
            try {
                // Fetch the JSON file generated by the Admin Panel
                let response = await fetch('data/products.json');
                let grid = document.getElementById('productGrid');
                grid.innerHTML = ''; // Clear loading text

                if (response.ok) {
                    let data = await response.json();
                    let products = data.items || [];
                    
                    // Loop through the database and build HTML cards
                    products.forEach(p => {
                        let badgeHTML = p.badge ? `<span class="badge">${p.badge}</span>` : '';
                        let imgPath = p.image.startsWith('/') ? p.image.substring(1) : p.image;
                        
                        let card = `
                        <div class="card filter-item ${p.category}">
                            <div class="card-image" onclick="openModal(this)" style="cursor: pointer;">
                                ${badgeHTML}
                                <img src="${imgPath}" alt="${p.title}">
                            </div>
                            <h3>${p.title}</h3>
                            <p class="desc">${p.description}</p>
                            <div class="price-row">
                                <span class="price">₹${p.price}</span>
                                <button class="btn-buy" onclick="buy('${p.title}', '${p.price}')">Buy Now</button>
                            </div>
                        </div>`;
                        grid.innerHTML += card;
                    });
                } else {
                    console.log("Database empty or not created yet.");
                }

                // Add the default "Coming Soon" card at the very end
                grid.innerHTML += `
                <div class="card filter-item coming-soon nath bugdi earcuffs">
                    <div class="card-image">
                        <span class="badge" style="background-color: #888;">Coming Soon</span>
                        <img src="images/logo.png" alt="Coming Soon" style="object-fit: contain; padding: 20px;">
                    </div>
                    <h3>Exclusive Collection</h3>
                    <p class="desc">New traditional designs are being crafted just for you.</p>
                    <div class="price-row">
                        <span class="price">--</span>
                        <button class="btn-buy" onclick="window.open('https://wa.me/919322148369?text=Hey%20Svarni!%20When%20are%20the%20Nath%20and%20Bugdi%20collections%20launching?', '_blank')">Notify Me</button>
                    </div>
                </div>`;

                // Re-trigger the category filter
                filterSelection("all");

            } catch (error) {
                console.error("Error loading products:", error);
            }
        }

        // Run this function as soon as the website loads!
        document.addEventListener("DOMContentLoaded", loadDatabase);

        // --- MODAL & FILTER LOGIC (Unchanged) ---
        function openModal(element) {
            let card = element.closest('.card');
            let imgSrc = card.querySelector('img').src;
            let title = card.querySelector('h3').innerText;
            let priceText = card.querySelector('.price').innerText;
            let rawPrice = priceText.replace('₹', '').trim(); 
            let desc = card.querySelector('.desc').innerText;

            document.getElementById('modalImg').src = imgSrc;
            document.getElementById('modalTitle').innerText = title;
            document.getElementById('modalPrice').innerText = priceText;
            document.getElementById('modalDesc').innerText = desc;
            
            let modalBtn = document.getElementById('modalBuyBtn');
            modalBtn.onclick = function() { buy(title, rawPrice); };

            let modal = document.getElementById('productModal');
            modal.style.display = "flex"; 
            setTimeout(() => { modal.classList.add('show'); }, 10);
        }

        function closeModal() {
            let modal = document.getElementById('productModal');
            modal.classList.remove('show');
            setTimeout(() => { modal.style.display = "none"; }, 300);
        }

        window.onclick = function(event) {
            let modal = document.getElementById('productModal');
            if (event.target == modal) { closeModal(); }
        }

        function filterSelection(c) {
            var x, i;
            x = document.getElementsByClassName("filter-item");
            if (typeof event !== 'undefined' && event && event.target && event.target.classList.contains('cat-btn')) {
                var btns = document.getElementsByClassName("cat-btn");
                for (var j = 0; j < btns.length; j++) { btns[j].classList.remove("active"); }
                event.target.classList.add("active");
            }
            if (c == "all") c = "";
            for (i = 0; i < x.length; i++) {
                x[i].style.display = "none"; 
                if (c == "") {
                    if (x[i].className.indexOf("coming-soon") == -1) x[i].style.display = "block";
                } else if (x[i].className.indexOf(c) > -1) {
                    x[i].style.display = "block";
                }
            }
        }

        // Admin Redirect Script
        if (window.netlifyIdentity) {
            window.netlifyIdentity.on("init", user => {
                if (!user) {
                    window.netlifyIdentity.on("login", () => {
                        document.location.href = "/admin/";
                    });
                }
            });
        }
    </script>
</body>
</html>